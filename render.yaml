# HEADY_BRAND:BEGIN
# ╔══════════════════════════════════════════════════════════════════╗
# ║  █╗  █╗███████╗ █████╗ ██████╗ █╗   █╗                     ║
# ║  █║  █║█╔════╝█╔══█╗█╔══█╗╚█╗ █╔╝                     ║
# ║  ███████║█████╗  ███████║█║  █║ ╚████╔╝                      ║
# ║  █╔══█║█╔══╝  █╔══█║█║  █║  ╚█╔╝                       ║
# ║  █║  █║███████╗█║  █║██████╔╝   █║                        ║
# ║  ╚═╝  ╚═╝╚══════╝╚═╝  ╚═╝╚═════╝    ╚═╝                        ║
# ║                                                                  ║
# ║  ∞ SACRED GEOMETRY ∞  Organic Systems · Breathing Interfaces    ║
# ║  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  ║
# ║  FILE: render.yaml                                                ║
# ║  LAYER: root                                                      ║
# ╚══════════════════════════════════════════════════════════════════╝
# HEADY_BRAND:END

services:
  - type: web
    name: heady-manager
    runtime: node
    buildCommand: npm install && pip install pyyaml psutil requests && npm run build --prefix frontend
    startCommand: node heady-manager.js
    envVars:
      - key: PORT
        value: "3300"
      - key: NODE_ENV
        value: "production"
      - key: HEADY_TARGET
        value: "${HEADY_TARGET}"
      - key: HEADY_VERSION
        value: "3.0.0"
      - key: CLOUD_LAYER
        value: "headysystems"
      - key: HEADY_ENDPOINT
        value: "https://headysystems.com"
      - key: HEADY_ME_URL
        value: "https://headycloud.com"
      - key: HEADY_SYSTEMS_URL
        value: "https://headysystems.com"
      - key: HEADY_CONNECTION_URL
        value: "https://headyconnection.com"
      - key: ENABLE_COLAB_ROUTING
        value: "true"
      - key: COLAB_REGISTRATION_ENABLED
        value: "true"
      - key: PYTHIA_ENABLED
        value: "true"
      - key: ALLOWED_ORIGINS
        value: "https://headysystems.com,https://headycloud.com,https://headyconnection.com,https://headymcp.com,https://headybot.com,https://headyio.com,https://headycheck.com,https://headybuddy.org"
      - key: ENABLE_CODEMAP
        value: "true"
      - key: JULES_ENABLED
        value: "true"
      - key: OBSERVER_ENABLED
        value: "true"
      - key: BUILDER_ENABLED
        value: "true"
      - key: ATLAS_ENABLED
        value: "true"
      - key: DATABASE_URL
        fromSecret: DATABASE_URL
      - key: HEADY_API_KEY
        fromSecret: HEADY_API_KEY
      - key: PYTHON_WORKER_PATH
        value: "backend/python_worker"
      - key: ADMIN_TOKEN
        fromSecret: ADMIN_TOKEN
      - key: REMOTE_GPU_HOST
        value: "${REMOTE_GPU_HOST}"
      - key: REMOTE_GPU_PORT
        value: "${REMOTE_GPU_PORT}"
      - key: GPU_MEMORY_LIMIT
        value: "${GPU_MEMORY_LIMIT}"
      - key: ENABLE_GPUDIRECT
        value: "${ENABLE_GPUDIRECT}"
      - key: HF_TOKEN
        fromSecret: HF_TOKEN
      - key: RENDER_API_KEY
        fromSecret: RENDER_API_KEY
